import { ListItem } from "./model";
import { getUrl } from "./proxypath_api";

export const getItemUrl = (item: ListItem) => {
  const url = getUrl();
  const items = url.split(".");
  let schema = 'http://'
  if (url.startsWith('https')) {
    schema = 'https://'
  }
 

  const hostWithoutSubdomain = items[items.length - 2] + "." + items[items.length - 1];
  
  let configPath = getFileNameFromPath(item.config!.config_path).split('.')[0];
 
  return schema + configPath + "." + item.hash_key + "." + hostWithoutSubdomain
};

export const getFileNameFromPath = (filePath: string) => {
    return filePath.replace(/^.*[\\\/]/, '')
}
